<template>
  <div class="content-wrap">
    <div class="content-left">
      <div class="content-up">
        <img src="../../../../asset/images/head-pic.jpg" class="head-pic" alt="">
        <h1 class="site-name">凌晨两点半</h1>
        <hr class="content-left-hr">
      </div>
      <ul class="content-down">
        <li>收集、分享前端组件</li>
        <li>分享前端技术</li>
        <li>收集常用工具文档</li>
      </ul>
      <hr class="content-left-hr">
      <ul class="content-down">
        <li>如本站内容侵犯了您的权益，请联系站长</li>
      </ul>
    </div>
    <div class="content-right">
       <!--<div class="code-wrap">
        <img src="../../../../asset/images/code.png" alt="">
        <p>{{title}}</p>
      </div>-->
      <div class="content-wrap">
        <div class="content-wrap-title">文章推荐：</div>
        <ul class="content-wrap-ul">
          <li v-for="item in articleList" >
              <img :src="item.atc_content | imgUrlFun" alt="" class="content-li-picture">
              <a :href="item.atc_id | addHref" class="content-wrap-a">
                <div class="content-detail-wrap">
                  <p>{{item.atc_title}}</p>
                  <span class="content-detail-date">{{item.atc_publish_time | formatData}}</span>
                  <span class="content-detail-label" v-for="itemLabel in item.labelList">{{itemLabel}}</span>
                </div>
              </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
<style>
  @import 'content.css';
</style>
<script type='babel'>
import request from 'framework/network/request';
import moment from 'moment';
export default {
    name:'v-content',
    data(){
      return {
        title:'博主微信',
        articleList: []
      }
    },
    filters: {
      formatData(data){
        return moment(parseInt(data)).format('YYYY-MM-DD');
      },
      addHref(data){
        return '/detail?id=' + data;
      },
      imgUrlFun(str){
        let data = '';
            str.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/, function (match, capture) {
                  data =  capture;
            });
            if(data==null || data==''){
              data = '/public/img/default.jpeg'
            }
        return data
      }
    },
    mounted() {
      this.loadData();
    },
    methods: {
      loadData() {
        request.get('/index/api/article/list').then(response => {
          this.articleList = response.data.temp;
          console.log('this.articleList',this.articleList);
        });
      }
    }
  };
</script>
